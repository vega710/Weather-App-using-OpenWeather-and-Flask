<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Weather Teller</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="../static/style_bootstrap.css">
    </head>
    <body>
        <div class="container p-4" style="max-width: 800px;">
            <div class="card shadow-lg p-4 mx-auto search-bar" style="max-width: 600px;">
                <div class="row text-center">
                    <h1>Atlas Weather</h1>
                </div>
                <div class="m-3">
                    <form class="d-flex gap-3" action="/" method="post">
                        <!--
                        <input type="text" placeholder="Enter city name" id="cityname" class="cityname" name="cityname" spellcheck="false">
                        -->
                        <div class="flex-grow-1">
                            <label class="form-label fw-bold">Chose the city</label>
                            <select id="cityname" name="cityname" class="form-select">
                                <option value="Agadir">Agadir</option>
                                <option value="Al Hoceima">Al Hoceima</option>
                                <option value="Azemmour">Azemmour</option>
                                <option value="Beni Mellal">Beni Mellal</option>
                                <option value="Berrechid">Berrechid</option>
                                <option value="Berkane">Berkane</option>
                                <option value="Casablanca">Casablanca</option>
                                <option value="Chefchaouen">Chefchaouen</option>
                                <option value="Dakhla">Dakhla</option>
                                <option value="Essaouira">Essaouira</option>
                                <option value="El Jadida">El Jadida</option>
                                <option value="Errachidia">Errachidia</option>
                                <option value="Fes">Fes</option>
                                <option value="Fnideq">Fnideq</option>
                                <option value="Guelmim">Guelmim</option>
                                <option value="Ifrane">Ifrane</option>
                                <option value="Inezgane">Inezgane</option>
                                <option value="Kenitra">Kenitra</option>
                                <option value="Khemisset">Khemisset</option>
                                <option value="Khenifra">Khenifra</option>
                                <option value="Khouribga">Khouribga</option>
                                <option value="Ksar el-Kebir">Ksar el-Kebir</option>
                                <option value="Laayoune">Laayoune</option>
                                <option value="Larache">Larache</option>
                                <option value="Marrakech">Marrakech</option>
                                <option value="Meknes">Meknes</option>
                                <option value="Mohammedia">Mohammedia</option>
                                <option value="Nador">Nador</option>
                                <option value="Ouarzazate">Ouarzazate</option>
                                <option value="Oujda">Oujda</option>
                                <option value="Rabat">Rabat</option>
                                <option value="Safi">Safi</option>
                                <option value="Salé">Salé</option>
                                <option value="Settat">Settat</option>
                                <option value="Sefrou">Sefrou</option>
                                <option value="Sidi Bennour">Sidi Bennour</option>
                                <option value="Sidi Kacem">Sidi Kacem</option>
                                <option value="Sidi Slimane">Sidi Slimane</option>
                                <option value="Skhirat">Skhirat</option>
                                <option value="Sidi Ifni">Sidi Ifni</option>
                                <option value="Tan-Tan">Tan-Tan</option>
                                <option value="Tangier">Tangier</option>
                                <option value="Taourirt">Taourirt</option>
                                <option value="Taza">Taza</option>
                                <option value="Tétouan">Tétouan</option>
                                <option value="Tiznit">Tiznit</option>
                                <option value="Zagora">Zagora</option>
                                <option value="Zemamra">Zemamra</option>
                                <option value="Souk El Arbaa">Souk El Arbaa</option>
                                <option value="Tinghir">Tinghir</option>
                                <option value="Oualidia">Oualidia</option>
                                <option value="Azrou">Azrou</option>
                                <option value="Tahla">Tahla</option>
                                <option value="Imouzzer Kandar">Imouzzer Kandar</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary align-self-end"><img src="../static/images/icons/search.png" width="22"></button>
                    </form>
                </div>

                {% if data %}
                {% if data.error %}
                    <div class="error">
                        <p>{{ data.error }}</p>
                    </div>
                {% else %}

            <div class="m-3">
                <!--- <img src="../static/images/icons/snow.png" class="weather-icon"> -->
                <div class="row p-3 align-items-center justify-content-center weather-summary">
                    <img src="{{ icon_url }}" class="img-fluid" style="max-width: 130px;">
                    <div class="col-12 col-md-8 ">
                        <div class="col-12 col-md-12">
                            <h4  id="DayTime" class="fw-semibold"></h4> 
                            <h1 class="fw-bold">{{ data.weather[0].main }} {{ data.main.temp | round(0) }}°c</h1>
                            <h3>{{ data.name }} - {{ data.sys.country }}</h3> 
                        </div> 
                    </div>
                    <div class="text-center p-1 mt-2 weather-description">
                        <h3 class="text-capitalize">{{ data.weather[0].description }}</h3>
                    </div>
                </div>

                <div class="row p-3 g-3 justify-content-center mt-3 align-items-center weather-details">
                    <div class="col-12 col-md-6">
                        <div class="card stat-card py-1 px-5">
                            <div>
                                <img src="../static/images/icons/sunrise.png" class="img-fluid" width="45">
                            </div>
                            <div>
                                <h5 class="stat fs-5 fw-bold mt-2">{{ sunrise }}</h5>
                            </div>
                        </div>
                    </div>

                    <div class="col-12 col-md-6">
                        <div class="card stat-card py-1 px-5">
                            <div>
                                <img src="../static/images/icons/sunset.png" class="img-fluid" width="45">
                            </div>
                            <div>
                                <h5 class="stat fs-5 fw-bold mt-2">{{ sunset }}</h5>
                            </div>
                        </div>
                    </div> 

                    <div class="col-12 col-md-6">
                        <div class="card stat-card py-1 px-5">
                            <div class="d-flex">
                                <div class="fs-4 fw-semibold">Humidity</div>
                                <!--<img src="../static/images/icons/humidity.png" width="40">-->
                            </div>
                            <div>
                                <p class="stat fs-5 fw-bold">{{data.main.humidity}}%</p>
                            </div>
                        </div>
                    </div> 

                    <div class="col-12 col-md-6">
                        <div class="card stat-card py-1 px-5">
                            <div class="d-flex">
                                <div class="fs-4 fw-semibold">Wind speed</div>
                                <!--<img src="../static/images/icons/wind.png" width="40">-->
                            </div>
                            <div>
                                <p class="stat fs-5 fw-bold">{{data.wind.speed}} km/h</p>
                            </div>
                        </div>
                    </div> 
                </div>
                    
                    <!--
                    <div class="col-3">
                        <img src="../static/images/icons/sunrise.png" class="img-fluid" width="45">
                    </div>
                    <div class="col-3">
                        <h5 class="mt-2">{{ sunrise }}</h5>
                    </div>
                    <div class="col-3">
                        <h5 class="mt-2">{{ sunset }}</h5>
                    </div>
                    <div class="col-3">
                        <img src="../static/images/icons/sunset.png" class="img-fluid" width="45">
                    </div>
                    


                <div class="row py-2 text-center mt-4 align-items-center weather-details">
                    <div class="col-3 py-1">
                        <div>
                            <img src="../static/images/icons/humidity.png" width="40">
                            <p class="">Humidity</p>
                        </div>
                    </div>
                    <div class="col-3">
                        <div>
                            <p class="fs-4 fw-bold">{{data.main.humidity}}%</p>
                        </div>
                    </div>
                    <div class="col-3 py-1">
                        <div>
                            <p class="fs-4 fw-bold">{{data.wind.speed}} km/h</p>
                        </div>
                    </div>
                    <div class="col-3">
                        <div>
                            <img src="../static/images/icons/wind.png" width="40">
                            <p class="">Wind speed</p>
                        </div>
                    </div>
                </div>
                -->
                <p class="mt-4 small text-center">
                    By Hicham LAKLAI
                </p>

            </div>
                {% endif %}
            {% endif %}    

            </div>
        </div>
        <script>
            function updateDateTime(){
                const now = new Date();
                const options = {
                    weekday:"long",
                    hour:"2-digit",
                    minute:"2-digit"
                };
                document.getElementById("DayTime").textContent=now.toLocaleString('en-US',options);
            }
            updateDateTime();
            setInterval(updateDateTime,1000);

        </script>
    </body>
</html>