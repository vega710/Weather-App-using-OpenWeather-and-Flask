<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Weather Teller</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="../static/style.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    </head>
    <body>
        <div class="card">
            <div class="searchbar">
                <form class="weather-form" action="/" method="post">
                    <!--
                    <input type="text" placeholder="Enter city name" id="cityname" class="cityname" name="cityname" spellcheck="false">
                    -->
                    <label class="labelcity">Chose the city</label>
                    <select id="cities" name="cities" class="cityname">
                        <option value="Casablanca">Casablanca</option>
                        <option value="Rabat">Rabat</option>
                        <option value="Tanger">Tanger</option>
                        <option value="Settat">Settat</option>
                    </select>
                    <button type="submit"><img src="../static/images/icons/search.png" alt=""></button>
                </form>
            </div>
            {% if data %}
                {% if data.error %}
                    <div class="error">
                        <p>{{ data.error }}</p>
                    </div>
                {% else %}
            <div class="weather">
                <!--- <img src="../static/images/icons/snow.png" class="weather-icon"> -->
                <div class="weather_summary">
                    <div class="row">
                        <img src="{{ icon_url }}" class="weather-icon">
                        <div class="weather_summary_2">
                            <h3  id="DayTime" class="city"></h3> 
                            <h1 class="temp">{{ data.weather[0].main }} {{ data.main.temp | round(0) }}Â°c</h1>
                            <h2 class="city">{{ data.name }} - {{ data.sys.country }}</h2> 
                        </div> 
                    </div>
                    <div class="description">
                        <h3>{{ data.weather[0].description }}</h3>
                    </div>
                </div>
                <div class="sunset-sunrise">   
                    <div class="col">
                        <img src="../static/images/icons/sunrise.png">
                        <h2>{{ sunrise }}</h2>
                    </div>
                    <div class="col">
                        <h2>{{ sunset }}</h2>
                        <img src="../static/images/icons/sunset.png">
                    </div>
                </div>
                <div class="details">
                    <div class="col">
                        <img src="../static/images/icons/humidity.png">
                        <div>
                        <p class="humidity">{{data.main.humidity}}%</p>
                        <p>Humidity</p>
                        </div>
                    </div>
                    <div class="col">
                        <img src="../static/images/icons/wind.png">
                        <div>
                        <p class="wind">{{data.wind.speed}} km/h</p>
                        <p>Wind speed</p>
                        </div>
                    </div>
                </div>
            </div>
                {% endif %}
            {% endif %}    
        </div>
        <script>
            function updateDateTime(){
                const now = new Date();
                const options = {
                    weekday:"long",
                    hour:"2-digit",
                    minute:"2-digit"
                };
                document.getElementById("DayTime").textContent=now.toLocaleString('en-US',options);
            }
            updateDateTime();
            setInterval(updateDateTime,1000);

        </script>
    </body>
</html>